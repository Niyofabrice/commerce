{% extends 'auctions/layout.html' %}

{% block body %}
    <div class="card">
        <div class="row"></div>
            <div class="col-md-4"></div>
                <img src="{{ listing.image_url }}" alt="Listing Image" style="">
            </div>
            <div class="col-md-8"></div>
                <div class="card-body"></div>
                    <h1>{{ listing.title }}</h1>
                    <p class="mt-3">{{ listing.description }}</p>
                    <p class="mt-5">Current Price: ${{ listing.starting_bid }}</p>
                    <p>Category: {{ listing.category }}</p>
                    <p>Seller: {{ listing.seller }}</p>
                    {% if top_bid %}
                        <p>Top Bid: ${{ top_bid }}</p>
                    {% endif %}
                    {% if listing.is_closed %}
                        <p>This listing is closed.</p>
                        <p>Winner: {{ listing.winner }}</p>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <div class="bid-form"></div>
                            <form method="POST" action="{% url 'bid' listing_id=listing.id %}">
                                {% csrf_token %}
                                <div class="form-group"></div>
                                    <label for="bid">Place a Bid:</label>
                                    <input type="number" id="bid" name="bid" class="form-control" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Place Bid</button>
                            </form>
                        </div>
                    {% endif %}
                    <div class="comments-section my-5"></div>
                        <h2>Comments</h2>
                        {% for comment in comments %}
                            <div class="comment">
                                <p>{{ comment.author }} said:</p>
                                <p>{{ comment.content }}</p>
                            </div>
                        {% empty %}
                            <p>No comments yet.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}