{% extends 'auctions/layout.html' %}

{% block body %}
    <div class="d-flex"></div>
        <img src="{{ listing.image_url }}" alt="Listing Image" style="width: 100px; height: 100px;">
        <h1>{{ listing.title }}</h1>
        <p class="mt-3">{{ listing.description }}</p>
        <p class="mt-5">Current Price: ${{ listing.starting_bid }}</p>
        <p>Category: {{ listing.category }}</p>
        <p>Seller: {{ listing.seller }}</p>
        {% if top_bid %}
            <p>Top Bid: ${{ listing.top_bid }}</p>
        {% endif %}
        {% if listing.is_closed %}
            <p>This listing is closed.</p>
            <p>Winner: {{ listing.winner }}</p>
        {% endif %}
        {% if user.is_authenticated %}
            <div class="bid-form">
                <form method="POST" action="{% url 'bid' listing_id=listing.id %}">
                    {% csrf_token %}
                    <label for="bid">Place a Bid:</label>
                    <input type="number" id="bid" name="bid" required><br><br>
                    <button type="submit">Place Bid</button>
                </form>
            </div>
        {% endif %}
        <div class="comments-section my-5">
            <h2>Comments</h2>
            {% for comment in comments %}
                <div class="comment">
                    <p>{{ comment.author }} said:</p>
                    <p>{{ comment.content }}</p>
                </div>
            {% empty %}
                <p>No comments yet.</p>
            {% endfor %}
        </div>
    </div>

{% endblock %}